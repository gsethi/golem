<html>
    <head>
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
        <title>Stream Graph</title>

        <script type="text/javascript" src="https://informatics-apps.systemsbiology.net/ext-js-3.3.1/adapter/ext/ext-base.js"></script>
        <script type="text/javascript" src="https://informatics-apps.systemsbiology.net/ext-js-3.3.1/ext-all.js"></script>
        <script type="text/javascript" src="https://informatics-apps.systemsbiology.net/d3js-2.1.3/d3.js?2.1.3"></script>
        <script type="text/javascript" src="https://informatics-apps.systemsbiology.net/d3js-2.1.3/d3.layout.js?2.1.3"></script>
            <script type="text/javascript" src="/html/js/stream.js"></script>
            <link href="https://informatics-apps.systemsbiology.net/d3js-2.1.3/examples/stream/stream.css" rel="stylesheet" type="text/css" />
            <link href="https://informatics-apps.systemsbiology.net/d3js-2.1.3/examples/button.css" rel="stylesheet" type="text/css" />
        <style type="text/css">
                @import url("https://informatics-apps.systemsbiology.net/d3js-2.1.3/examples/style.css?1.10.0");
                @import url("https://informatics-apps.systemsbiology.net/d3js-2.1.3/examples/syntax.css?1.6.0");
        </style>
        <script type="text/javascript">
            Ext.onReady(function() {
               Ext.TaskMgr.start({
					run: pollnodesandjobs,
					interval: 1000
				});
               var timen = document.getElementById("numberOfSecondsSince");
               var url = "/cluster/?numberOfSecondsSince="+timen
               Ext.Ajax.request({
                    method: "GET",
                    url: url,
                    success: function(o) {
                        var json = Ext.util.JSON.decode(o.responseText);
                        if (json && json.Items) {
                            Ext.getDom("dataout").innerHTML = o.responseText
                        }
                    }
                });
            });
        </script>
    </head>
    <body>
        <div class="body">
        	Show Last <input type="text" id="numberOfSecondsSince" value="900" /> Seconds
        	<button class="first last" onclick="transition()">Update</button><p/>
            <div id="chart">
               
            </div>
            <div id="jobs">
               
            </div>
            <div id="nodes">
               
            </div>
            
        </div>
        <div id="dataout"></div>
    </body>
</html>